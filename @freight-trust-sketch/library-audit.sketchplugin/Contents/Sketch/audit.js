var that=this;function __skpm_run(key,context){that.context=context;var exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/audit.js")}({"./src/audit.js":
/*!**********************!*\
  !*** ./src/audit.js ***!
  \**********************/
/*! exports provided: runAudit */function(e,t,n){"use strict";n.r(t),n.d(t,"runAudit",function(){return S});var r=n(/*! ./delegate.js */"./src/delegate.js"),a=n.n(r),o=(n(/*! sketch/dom */"sketch/dom"),n(/*! sketch/dom */"sketch/dom").Library),l=n(/*! sketch/ui */"sketch/ui"),s=o.getLibraries(),i=0,c=[],u=[],d="";function S(e){0==s.length?f("Sorry, no libraries were found."):0==(u=function(){for(var e=[],t=0;t<s.length;t++)if(s[t].valid&&s[t].enabled){var n=s[t].getDocument(),r={name:s[t].name,symbol:n.getSymbols(),layerStyle:n.sharedLayerStyles,textStyle:n.sharedTextStyles,path:""};"Remote"!=s[t].libraryType&&(r.path=n.path),e.push(r)}return e}()).length?f("Sorry, no valid libraries were found."):y()}function f(e){var t=context.plugin.urlForResourceNamed("icon.png").path(),n=NSImage.alloc().initByReferencingFile(t),r=NSAlert.alloc().init();r.setIcon(n),r.setMessageText("Library Audit"),r.setInformativeText(e),r.addButtonWithTitle("Ok"),r.runModal(),NSAlertFirstButtonReturn}function y(){var e=context.plugin.urlForResourceNamed("icon.png").path(),t=NSImage.alloc().initByReferencingFile(e),n=NSAlert.alloc().init();n.setIcon(t),n.titlebarAppearsTransparent=!0,n.setMessageText("Library Audit"),n.setInformativeText("Export Symbol and Shared Style data from any Library to CSV."),n.addButtonWithTitle("Export"),n.addButtonWithTitle("Cancel");var r=g("Library",12,NSMakeRect(0,113,100,28)),o=function(e,t,n){var r=NSComboBox.alloc().initWithFrame(n),t=t>-1?t:0;return r.addItemsWithObjectValues(e),r.selectItemAtIndex(t),r.setNumberOfVisibleItems(16),r.setCompletes(1),r}(function(){for(var e=[],t=0;t<u.length;t++)e.push(u[t].name);return e}(),i,NSMakeRect(120,118,220,28)),s=p(NSMakeRect(0,104,350,1)),S=g("Export Options",12,NSMakeRect(0,61,100,28)),f=m(NSMakeRect(120,66,220,28),"Symbols","symbol",!0,!0),y=m(NSMakeRect(120,38,220,28),"Layer Styles","layer",!0,!0),b=m(NSMakeRect(120,10,220,28),"Text Styles","text",!0,!0),v=p(NSMakeRect(0,0,350,1));c=[f,y,b],h();var x=NSView.alloc().initWithFrame(NSMakeRect(0,0,350,150));x.addSubview(r),x.addSubview(o),x.addSubview(s),x.addSubview(S),x.addSubview(f),x.addSubview(y),x.addSubview(b),x.addSubview(v),n.setAccessoryView(x);var N=new a.a({"comboBoxSelectionDidChange:":function(){i=o.indexOfSelectedItem(),h()}});o.setDelegate(N.getClassInstance()),n.runModal()==NSAlertFirstButtonReturn&&(function(){var e=[];if(c[0].state()){for(var t=0;t<u[i].symbol.length;t++){var n=u[i].symbol[t].name.replace(/,/g,"")+","+u[i].symbol[t].getAllInstances().length+",";""!=u[i].path&&(n+="sketch://"+u[i].path+"?centerOnLayer="+u[i].symbol[t].id+"&zoom=1\n"),e.push(n)}e.sort(),e.unshift("Symbols,"+u[i].symbol.length+",\n"),e.push(",,\n")}var r=[];if(c[1].state()){for(var t=0;t<u[i].layerStyle.length;t++){var n=u[i].layerStyle[t].name+","+u[i].layerStyle[t].getAllInstances().length+",\n";r.push(n)}r.sort(),r.unshift("Layer Styles,"+u[i].layerStyle.length+",\n"),r.push(",,\n")}var a=[];if(c[2].state()){for(var t=0;t<u[i].textStyle.length;t++){var n=u[i].textStyle[t].name+","+u[i].textStyle[t].getAllInstances().length+",\n";a.push(n)}a.sort(),a.unshift("Text Styles,"+u[i].textStyle.length+",\n")}var o=e.concat(r,a);o.unshift(",,\n"),o.unshift("Name,Instances,URI\n"),d=o.join("")}(),function(){var e=NSSavePanel.savePanel();if(e.setNameFieldStringValue("audit.csv"),e.setAllowsOtherFileTypes(!1),e.setExtensionHidden(!1),e.runModal()!=NSFileHandlingPanelOKButton)return void l.message("ðŸ““ Export canceled.");var t=e.URL().path(),n=NSString.stringWithString(d);n.writeToFile_atomically_encoding_error(t,!0,NSUTF8StringEncoding,null),l.message("ðŸ““ Export of "+t+" complete!")}())}function h(){c[0].setTitle(u[i].symbol.length+" Symbols"),c[1].setTitle(u[i].layerStyle.length+" Layer Styles"),c[2].setTitle(u[i].textStyle.length+" Text Styles")}function g(e,t,n){var r=NSTextField.alloc().initWithFrame(n);return r.setStringValue(e),r.setFont(NSFont.boldSystemFontOfSize(t)),r.setBezeled(!1),r.setDrawsBackground(!1),r.setEditable(!1),r.setSelectable(!1),r}function m(e,t,n,r,a){var o=NSButton.alloc().initWithFrame(e);return o.setButtonType(NSSwitchButton),o.setTitle(t),o.setTag(n),o.setState(r?NSOnState:NSOffState),o.setEnabled(a),o}function p(e){var t=NSView.alloc().initWithFrame(e);return t.setWantsLayer(1),t.layer().setBackgroundColor(CGColorCreateGenericRGB(.8,.8,.8,1)),t}},"./src/delegate.js":
/*!*************************!*\
  !*** ./src/delegate.js ***!
  \*************************/
/*! no static exports found */function(module,exports){function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var MochaJSDelegate=function MochaJSDelegate(selectorHandlerDict){var uniqueClassName="MochaJSDelegate_DynamicClass_"+NSUUID.UUID().UUIDString(),delegateClassDesc=MOClassDescription.allocateDescriptionForClassWithName_superclass_(uniqueClassName,NSObject);delegateClassDesc.registerClass();var handlers={};if(this.setHandlerForSelector=function(selectorString,func){var handlerHasBeenSet=selectorString in handlers,selector=NSSelectorFromString(selectorString);if(handlers[selectorString]=func,!handlerHasBeenSet){for(var dynamicHandler=function(){var e=handlers[selectorString];if(e)return e.apply(delegateClassDesc,arguments)},args=[],match="",regex=/:/g;match=regex.exec(selectorString);)args.push("arg"+args.length);var dynamicFunction=eval("(function("+args.join(",")+"){ return dynamicHandler.apply(this, arguments); })");delegateClassDesc.addInstanceMethodWithSelector_function_(selector,dynamicFunction)}},this.removeHandlerForSelector=function(e){delete handlers[e]},this.getHandlerForSelector=function(e){return handlers[e]},this.getAllHandlers=function(){return handlers},this.getClass=function(){return NSClassFromString(uniqueClassName)},this.getClassInstance=function(){return NSClassFromString(uniqueClassName).new()},"object"==_typeof(selectorHandlerDict))for(var selectorString in selectorHandlerDict)this.setHandlerForSelector(selectorString,selectorHandlerDict[selectorString])};module.exports=MochaJSDelegate},"sketch/dom":
/*!*****************************!*\
  !*** external "sketch/dom" ***!
  \*****************************/
/*! no static exports found */function(e,t){e.exports=require("sketch/dom")},"sketch/ui":
/*!****************************!*\
  !*** external "sketch/ui" ***!
  \****************************/
/*! no static exports found */function(e,t){e.exports=require("sketch/ui")}});"default"===key&&"function"==typeof exports?exports(context):exports[key](context)}that.runAudit=__skpm_run.bind(this,"runAudit"),that.onRun=__skpm_run.bind(this,"default");